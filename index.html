<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TT Space Rocks</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        /* Estilo da tela inicial */
        #tela-inicial {
            position: absolute;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            flex-direction: column;
            padding-top: 100px;
        }
        /* Titulo em Pixel Art usado na tela inicial */
        #tela-inicial img {
            max-width: 80%;
            max-height: 60%;
        }
        /* propriedades css do botão */
        #start-btn {
            width: 200px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        /* efeito do botão ao passar o cursor */
        #start-btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <canvas></canvas>
    
    <script>
        const criarElemento = (tag, atributos = {}, estilos = {}, eventos = {}) => {
            const elemento = document.createElement(tag);
            Object.entries(atributos).forEach(([key, value]) => elemento.setAttribute(key, value));
            Object.entries(estilos).forEach(([key, value]) => (elemento.style[key] = value));
            Object.entries(eventos).forEach(([key, func]) => elemento.addEventListener(key, func));
            return elemento;
        };

        const iniciarJogo = () => {
            document.getElementById("tela-inicial").style.display = "none";
            jogoIniciado = true;
            animate();
        };

        const criarTelaInicial = () => {
            const telaInicial = criarElemento("div", { id: "tela-inicial" }, {
                position: "absolute",
                width: "100%",
                height: "100%",
                background: "black",
                display: "flex",
                justifyContent: "flex-start",
                alignItems: "center",
                flexDirection: "column",
                paddingTop: "100px",
            });

            const titulo = criarElemento("img", { src: "imagens/titulo.png", alt: "Título do jogo" }, {
                maxWidth: "80%",
                maxHeight: "60%",
            });

            const botao = criarElemento(
                "img",
                { id: "start-btn", src: "imagens/botao.png", alt: "Botão Iniciar" },
                {
                    width: "200px",
                    cursor: "pointer",
                    transition: "transform 0.2s",
                },
                {
                    click: iniciarJogo,
                    mouseover: () => (botao.style.transform = "scale(1.1)"),
                    mouseout: () => (botao.style.transform = "scale(1)"),
                }
            );

            telaInicial.appendChild(titulo);
            telaInicial.appendChild(botao);
            document.body.appendChild(telaInicial);
        };

        criarTelaInicial();

        let width = window.innerWidth;
        let height = window.innerHeight;

        const canvas = document.querySelector('canvas');
        canvas.width = width;
        canvas.height = height;

        const c = canvas.getContext('2d');
        c.fillStyle = 'black';
        c.fillRect(0, 0, width, height);

        let jogoIniciado = false;

        let rochas = [
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 }
        ];

        function criarRochas() {
            let rocha = { x: Math.random() * (width - 50), y: 0 };
            rochas.push(rocha);
        }

        let tiros = [];
        let navePos = { x: 50, y: height - 100 };

        let rochaImg = new Image();
        rochaImg.src = 'imagens/stone_PNG13556.png';

        let naveImg = new Image();
        naveImg.src = 'imagens/Spaceship-PNG-File.png';

        function atirar() {
            const tiro = {
                x: navePos.x + 45,
                y: navePos.y - 20,
                width: 10,
                height: 20,
                speed: 5,
            };
            tiros.push(tiro);
        }

        function animate() {
            if (!jogoIniciado) return;
            window.requestAnimationFrame(animate);
            c.fillRect(0, 0, width, height);

            rochas.forEach((rocha, i) => {
                rocha.y += 1;
                c.drawImage(rochaImg, rocha.x, rocha.y, 50, 50);
                if (rocha.y > height) {
                    rochas.splice(i, 1);
                    criarRochas();
                }
            });

            c.drawImage(naveImg, navePos.x, navePos.y, 100, 100);
        }
    </script>
</body>
</html>
