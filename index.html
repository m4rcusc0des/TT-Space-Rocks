<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TT Space Rocks</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        /* Estilo da tela inicial */
        #tela-inicial {
            position: absolute;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            justify-content: flex-start; /* Move tudo um pouco para cima */
            align-items: center;
            flex-direction: column;
            padding-top: 100px; /* Ajuste para subir mais */
        }
        #tela-inicial img {
            max-width: 80%;
            max-height: 60%;
        }
        #start-btn {
            width: 200px; /* Ajuste de largura */
            cursor: pointer; /* Muda o cursos para a "maozinha" */
            transition: transform 0.2s;
        }
        #start-btn:hover {
            transform: scale(1.1); /* Efeito de zoom ao passar o mouse */
        }
    </style>
</head>
<body>

    <!-- Tela Inicial -->
    <div id="tela-inicial">
        <img src="imagens/titulo.png" alt="Título do jogo">
        <img id="start-btn" src="imagens/botao.png" alt="Botão Iniciar">
    </div>

    <!-- Tela Game Over -->
    <div id="tela-game-over">
        <img src="imagens/gameover.png" alt="Game Over">
        <img id="restart-btn" src="imagens/botao.png" alt="Botão Reiniciar">
    </div>

    <!-- Canvas do jogo -->
    <canvas></canvas>

    <script>
        const criarElemento = (tag, atributos = {}, estilos = {}, eventos = {}) => {
            const elemento = document.createElement(tag);
            Object.entries(atributos).forEach(([key, value]) => elemento.setAttribute(key, value));
            Object.entries(estilos).forEach(([key, value]) => (elemento.style[key] = value));
            Object.entries(eventos).forEach(([key, func]) => elemento.addEventListener(key, func));
            return elemento;
        };

        const iniciarJogo = () => {
            document.getElementById("tela-inicial").style.display = "none";
            document.getElementById("tela-game-over").style.display = "none";
            jogoIniciado = true;
            gameOver = false;
            navePos = { x: 50, y: height - 100 };
            rochas = [
                { x: Math.random() * (width - 50), y: 0 },
                { x: Math.random() * (width - 50), y: 0 },
                { x: Math.random() * (width - 50), y: 0 },
                { x: Math.random() * (width - 50), y: 0 },
                { x: Math.random() * (width - 50), y: 0 }
            ];
            tiros = [];
            animate();

        };
        
        const mostrarGameOver = () => {
            document.getElementById("tela-game-over").style.display = "flex";
            jogoIniciado = false;
            gameOver = true;
        };

        const criarTelaInicial = () => {
            const telaInicial = criarElemento("div", { id: "tela-inicial" }, {
                position: "absolute",
                width: "100%",
                height: "100%",
                background: "black",
                display: "flex",
                justifyContent: "flex-start",
                alignItems: "center",
                flexDirection: "column",
                paddingTop: "100px",
            });

            const titulo = criarElemento("img", { src: "imagens/titulo.png", alt: "Título do jogo" }, {
                maxWidth: "80%",
                maxHeight: "60%",
            });

            const botao = criarElemento(
                "img",
                { id: "start-btn", src: "imagens/botao.png", alt: "Botão Iniciar" },
                {
                    width: "200px",
                    cursor: "pointer",
                    transition: "transform 0.2s",
                },
                {
                    click: iniciarJogo,
                    mouseover: () => (botao.style.transform = "scale(1.1)"),
                    mouseout: () => (botao.style.transform = "scale(1)"),
                }
            );

            telaInicial.appendChild(titulo);
            telaInicial.appendChild(botao);
            document.body.appendChild(telaInicial);
        };

        criarTelaInicial();
        
        let width = window.innerWidth;
        let height = window.innerHeight;

        const canvas = document.querySelector('canvas');
        canvas.width = width;
        canvas.height = height;

        const c = canvas.getContext('2d');
        c.fillStyle = 'black';
        c.fillRect(0, 0, width, height);

        let jogoIniciado = false;
        let gameOver = false;

        let rochas = [
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 },
            { x: Math.random() * (width - 50), y: 0 }
        ];

        function criarRochas() {
            let rocha = { x: Math.random() * (width - 50), y: 0 };
            rochas.push(rocha);
        }

        let tiros = [];
        let navePos = { x: 50, y: height - 100 };

        let rochaImg = new Image();
        rochaImg.src = 'imagens/stone_PNG13556.png';

        let naveImg = new Image();
        naveImg.src = 'imagens/Spaceship-PNG-File.png';

        let gameOverImg = new Image();
        gameOverImg.src = 'imagens/gameover.png';

        function atirar() {
            const tiro = {
                x: navePos.x + 45,
                y: navePos.y - 20,
                width: 10,
                height: 20,
                speed: 5,
            };
            tiros.push(tiro);
        }

        function animate() {
            if (!jogoIniciado || gameOver) return;
            window.requestAnimationFrame(animate);
            c.fillStyle = 'black';
            c.fillRect(0, 0, width, height);


            for (let j = 0; j < rochas.length; j++) {
                let rocha = rochas[j];
                if (checkCollision(
                    {x: navePos.x, y: navePos.y, width: 100, height: 100},
                    {x: rocha.x, y: rocha.y, width: 50, height: 50}
                )) {
                    mostrarGameOver();
                    return;
                }
            }

            for (let i = 0; i < rochas.length; i++) {
                let rocha = rochas[i];
                rocha.y += 1;
                c.drawImage(rochaImg, rocha.x, rocha.y, 50, 50);
                if (rocha.y > height) {
                    rochas.splice(i, 1);
                    criarRochas();
                    break;
                }
            }

            c.drawImage(naveImg, navePos.x, navePos.y, 100, 100);

            for (let i = 0; i < tiros.length; i++) {
                let tiro = tiros[i];
                tiro.y -= tiro.speed;
                c.fillStyle = 'red';
                c.fillRect(tiro.x, tiro.y, tiro.width, tiro.height);
                c.fillStyle = 'black';

                for (let j = 0; j < rochas.length; j++) {
                    let rocha = rochas[j];
                    if (checkCollision(tiro, rocha)) {
                        tiros.splice(i, 1);
                        rochas.splice(j, 1);
                        criarRochas();
                        i--;
                        j--;
                    }
                }
            }
        }

        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + 50 && 
                   rect1.x + rect1.width > rect2.x && 
                   rect1.y < rect2.y + 50 && 
                   rect1.y + rect1.height > rect2.y;
        }

        window.addEventListener('keydown', (e) => {
            if (!jogoIniciado || gameOver) return;

            if (e.key === 'ArrowRight' && navePos.x < width - 100) {
                navePos.x += 40;
            }
            if (e.key === 'ArrowLeft' && navePos.x > 5) {
                navePos.x -= 40;
            }
            if (e.key === ' ' || e.key === 'Spacebar') {
                atirar();
            }
        });

        document.getElementById('start-btn').addEventListener('click', iniciarJogo);
        document.getElementById('restart-btn').addEventListener('click', iniciarJogo);
        
        rochaImg.onload = function() {
            naveImg.onload = function() {
                c.fillStyle = 'black';
                c.fillRect(0, 0, width, height);
                c.drawImage(naveImg, navePos.x, navePos.y, 100, 100);
            };
        };
    </script>
</body>
</html>

